---
replicaCount: 1

namespace: dispatching-staging
region: teh-1

labels:
  managedby: dispatching-team
  createdby: dispatching-team

image:
  registry: docker-registry.default.svc:5000
  repository: realtime-staging/soteria
  pullPolicy: Always

timezone: Asia/Tehran

service:
  type: ClusterIP
  ports:
    - name: http
      port: 9999
      protocol: tcp

resources:
  limits:
    memory: 128Mi
    cpu: 2
  requests:
    memory: 128Mi
    cpu: 1

autoscaling:
  enabled: false
  minReplicas: 3
  maxReplicas: 20
  targetCPUUtilizationPercentage: 65

rollingParams:
  maxSurge: 5
  maxUnavailable: 0

serviceMonitor:
  enabled: false

jwtKeys:
  0.pem: |-
    -----BEGIN PUBLIC KEY-----
    MIIBITANBgkqhkiG9w0BAQEFAAOCAQ4AMIIBCQKCAQBk7O6M5p4eYNAwtVU2beGa
    W4mhFG94OtYUWDl1E7UUrhUNGf97Eb/45NjQszu0YPERnApJc2RUm2TrS7iq0mHz
    Xbwf+CbNF54Q5mjuHcpBKgvFwUUSCCYBftmRc4xbFIH4Oh3nHC2GeukUS9TmJwjM
    tJKyU0Ve8BK5BgjhagM7XSs+scE2mxemoWtcs6mJLtBuEgRGMgHW00mSdOcLp/+l
    oHpSzRYN92/DomwmmjGVy8Ji0faeHx+r79ZzE0E8Rcc29Yhrg1ymrjfkXg98WjAb
    TSv4UAN20lsBDejpnGEZKJrxHZ56gHgaJn6PKKCD6ItJA7y7iraCdBhCfAIUIz/z
    AgMBAAE=
    -----END PUBLIC KEY-----
  1.pem: |-
    -----BEGIN PUBLIC KEY-----
    MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1lNRwyNsDieWs6LvHOJ+
    GyehhRC4Pn5yL5edKP3565F3LtRDMrkzwDRsQbqnUtTea9HCdTdBv+lI8vE17qRi
    RQn10IMaIH6e4Aa3OWNClFhuqNOag7VmffsjTOgxHgHpfGAKVF/4BwqOHrdHFbAD
    VOiWB1hv9Uc0C5laffGAub7fj+EAI02zlrsNDxYW8vyF2H47N7VWcvgd3RhZpxlG
    8bq9phl7Ja55YmQiT2Ic3/K5tsazg5z9lz6OTrx+JvWbefHFlJpjCLz5yefEaRmX
    9L/zyDMi4jgFTZEWNXC2vIrxwZMFwFhBXEp0PcCbuHJgJIucbRrbwukQC16uHJwP
    zQIDAQAB
    -----END PUBLIC KEY-----

authEnvs:
  jwt_keys_path: "/jwt_pems/"
  driver_salt: "secret"
  passenger_salt: "secret"
  driver_hash_length: 15
  passenger_hash_length: 15

envs:
  allowed_access_types: [ "pub", "sub" ]
  # company: "baly"
  logger_level: "warn"

users:
  - username: driver
    rules:
      - topic: cab_event
        access: '1'
      - topic: driver_location
        access: '2'
      - topic: shared_location
        access: '1'
      - topic: superapp_event
        access: '1'
      - topic: node_call_entry
        access: '2'
      - topic: general_call_entry
        access: '2'
      - topic: call_outgoing
        access: '1'
      - topic: chat
        access: '1'
      - topic: chat
        access: '2'
  - username: passenger
    rules:
      - topic: cab_event
        access: '1'
      - topic: superapp_event
        access: '1'
      - topic: passenger_location
        access: '2'
      - topic: shared_location
        access: '1'
      - topic: node_call_entry
        access: '2'
      - topic: general_call_entry
        access: '2'
      - topic: call_outgoing
        access: '1'
      - topic: chat
        access: '1'
      - topic: chat
        access: '2'
